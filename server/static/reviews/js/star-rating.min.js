/*!
 * Star Rating
 * @version: 3.1.2
 * @author: Paul Ryley (http://geminilabs.io)
 * @url: https://github.com/geminilabs/star-rating.js
 * @license: MIT
 */
!function(i,n,t){"use strict";var e="star-rating",s=function(t,i){this.selects="[object String]"==={}.toString.call(t)?n.querySelectorAll(t):[t],this.destroy=function(){this.widgets.forEach(function(t){t.t()})},this.rebuild=function(){this.widgets.forEach(function(t){t.i()})},this.widgets=[];for(var s=0;s<this.selects.length;s++)if("SELECT"===this.selects[s].tagName&&!this.selects[s][e]){var h=new o(this.selects[s],i);void 0!==h.direction&&this.widgets.push(h)}},o=function(t,i){this.el=t,this.s=this.h({},this.n,i||{},JSON.parse(t.getAttribute("data-options"))),this.e(),this.stars<1||this.stars>this.s.maxStars||this.o()};o.prototype={n:{classname:"gl-star-rating",clearable:!0,initialText:"Select a Rating",maxStars:10,showText:!0},o:function(){this.r(),this.current=this.selected=this.a(),this.u(),this.c(),this.f(),this.v(this.current),this.l("add"),this.el[e]=!0},d:function(){this.s.showText&&(this.textEl=this._(this.widgetEl,{class:this.s.classname+"-text"},!0))},c:function(){var t=this.m(),i=this._(this.el,{class:this.s.classname+"-stars"},!0);for(var s in t){var h=this.g({"data-value":s,"data-text":t[s]});i.innerHTML+=h.outerHTML}this.widgetEl=i,this.d()},w:function(t){(t<0||isNaN(t))&&(t=0),t>this.stars&&(t=this.stars),this.widgetEl.classList.remove("s"+10*this.current),this.widgetEl.classList.add("s"+10*t),this.s.showText&&(this.textEl.textContent=t<1?this.s.initialText:this.widgetEl.childNodes[t-1].dataset.text),this.current=t},g:function(t){var i=n.createElement("span");for(var s in t=t||{})i.setAttribute(s,t[s]);return i},t:function(){this.l("remove");var t=this.el.parentNode;t.parentNode.replaceChild(this.el,t),delete this.el[e]},p:function(i,s,t){t.forEach(function(t){i[s+"EventListener"](t,this.events[t])}.bind(this))},h:function(){var t=[].slice.call(arguments),s=t[0],h=t.slice(1);return Object.keys(h).forEach(function(t){for(var i in h[t])h[t].hasOwnProperty(i)&&(s[i]=h[t][i])}),s},b:function(t){var i={},s=t.pageX||t.changedTouches[0].pageX,h=this.widgetEl.offsetWidth;return i.ltr=Math.max(s-this.offsetLeft,1),i.rtl=h-i.ltr,Math.min(Math.ceil(i[this.direction]/Math.round(h/this.stars)),this.stars)},m:function(){for(var t=this.el,i={},s={},h=0;h<t.length;h++)this.S(t[h])||(i[t[h].value]=t[h].text);return Object.keys(i).sort().forEach(function(t){s[t]=i[t]}),s},a:function(){return parseInt(this.el.options[Math.max(this.el.selectedIndex,0)].value)||0},l:function(t){var i=this.el.closest("form");"FORM"===i.tagName&&this.p(i,t,["reset"]),this.p(this.el,t,["change","keydown"]),this.p(this.widgetEl,t,["mousedown","mouseleave","mousemove","mouseover","touchend","touchmove","touchstart"])},r:function(){this.events={change:this.M.bind(this),keydown:this.x.bind(this),mousedown:this.y.bind(this),mouseleave:this.L.bind(this),mousemove:this.F.bind(this),mouseover:this.N.bind(this),reset:this.O.bind(this),touchend:this.y.bind(this),touchmove:this.F.bind(this),touchstart:this.N.bind(this)}},_:function(t,i,s){var h=this.g(i);return t.parentNode.insertBefore(h,!0===s?t.nextSibling:t),h},S:function(t){return null===t.getAttribute("value")||""===t.value},M:function(){this.w(this.a())},x:function(t){if(~["ArrowLeft","ArrowRight"].indexOf(t.key)){var i="ArrowLeft"===t.key?-1:1;"rtl"===this.direction&&(i*=-1),this.v(Math.min(Math.max(this.a()+i,0),this.stars)),this.j()}},y:function(t){t.preventDefault();var i=this.b(t);if(0!==this.current&&parseFloat(this.selected)===i&&this.s.clearable)return this.O(),void this.j();this.v(i),this.j()},L:function(t){t.preventDefault(),this.w(this.selected)},F:function(t){t.preventDefault(),this.w(this.b(t))},N:function(t){t.preventDefault();var i=this.widgetEl.getBoundingClientRect();this.offsetLeft=i.left+n.body.scrollLeft},O:function(){var t=this.el.querySelector("[selected]"),i=t?t.value:"";this.el.value=i,this.selected=parseInt(i)||0,this.w(i)},i:function(){this.el.parentNode.classList.contains(this.s.classname)&&this.t(),this.o()},f:function(){var t=this.el.parentNode;this.direction=i.getComputedStyle(t,null).getPropertyValue("direction"),t.classList.add(this.s.classname+"-"+this.direction)},v:function(t){this.el.value=this.selected=t,this.w(t)},e:function(){for(var t=this.el,i=this.stars=0;i<t.length;i++)if(!this.S(t[i])){if(isNaN(parseFloat(t[i].value))||!isFinite(t[i].value))return void(this.stars=0);this.stars++}},j:function(){this.el.dispatchEvent(new Event("change"))},u:function(){this._(this.el,{class:this.s.classname,"data-star-rating":""}).appendChild(this.el)}},"function"==typeof define&&define.amd?define([],function(){return s}):"object"==typeof module&&module.exports?module.exports=s:i.StarRating=s}(window,document);